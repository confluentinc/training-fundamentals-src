<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.15">
<title>Apache Kafka&#174; Fundamentals: Hands-On Activity</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:50%;border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Apache Kafka&#174; Fundamentals: Hands-On Activity</h1>
<div class="details">
<span id="revnumber">version draft</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_lab_setup">Lab Setup</a></li>
<li><a href="#_set_up_a_topic_producer_and_consumer">Set up a Topic, Producer, and Consumer</a></li>
<li><a href="#_experience_producing_and_consuming">Experience Producing and Consuming</a></li>
<li><a href="#_observe_partitions_and_log_end_offsets">Observe Partitions and Log End Offsets</a></li>
<li><a href="#_observe_consumer_offsets">Observe Consumer Offsets</a></li>
<li><a href="#_cleanup">Cleanup</a></li>
<li><a href="#_enrichment_optional">Enrichment - OPTIONAL</a>
<ul class="sectlevel2">
<li><a href="#_explore_partitions_further">Explore Partitions Further</a></li>
<li><a href="#_interpret_consumption_status">Interpret Consumption Status</a></li>
<li><a href="#_observe_brokers">Observe Brokers</a></li>
<li><a href="#_further_enrichment">Further Enrichment</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a hands-on activity designed to let you experience some of the concepts from Fundamentals for yourself. It runs entirely within a web browser - nothing else needed - using a tool called Gitpod.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Expected time:</strong> Budget a half hour for this activity. Give yourself an extra half hour if you&#8217;re also interested in trying the Enrichment exercises at the end, although you could spend more time if you&#8217;re interesting in experimenting further.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lab_setup">Lab Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To get started, <a href="https://gitpod.io/#https://github.com/confluentinc/training-fundamentals-src/gitpod-activity2022/" target="_blank" rel="noopener">click here to launch the lab environment in Gitpod</a>.</p>
</div>
<div class="paragraph">
<p>You should see something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/gitpod-init-view.png" alt="gitpod init view">
</div>
</div>
<div class="paragraph">
<p>You won&#8217;t need the side navigation pane, nor the top pane&#8201;&#8212;&#8201;so you may close them&#8201;&#8212;&#8201;and you can close the notification about "A service is&#8230;&#8203;":</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/gitpod-init-view2.png" alt="gitpod init view2">
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll now see three terminals running in three panes. One is meant for setup and status information, one is meant for producing, and one is meant for consuming. You are encouraged to make the leftmost terminal pane the widest and the other two smaller, something like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/gitpod-init-view3.png" alt="gitpod init view3">
</div>
</div>
<div class="paragraph">
<p>Observe that in each terminal, you&#8217;ll see a <code>[appuser@broker ~]$</code> prompt. Each is running bash, all in the same Docker container (but you don&#8217;t need to know anything about Docker; all that setup is done for you).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_set_up_a_topic_producer_and_consumer">Set up a Topic, Producer, and Consumer</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this exercise, we&#8217;ll use a single topic and command line producer and consumer tools. Let&#8217;s get them all set up.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you copy commands and paste them into Gitpod, you&#8217;ll be asked to allow clipboard access the first time. This is normal.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Follow these steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In the left Setup and Status terminal pane, run this command to create the topic <code>test-topic</code> with <strong>3</strong> partitions:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-topics \
    --create \
    --bootstrap-server broker:9092 \
    --topic test-topic \
    --partitions 3</strong></pre>
</div>
</div>
</li>
<li>
<p>In the middle Producing terminal pane, run this command to start your producer:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-console-producer \
    --bootstrap-server broker:9092 \
    --topic test-topic \
    --property parse.key=true \
    --property key.separator=:</strong></pre>
</div>
</div>
</li>
<li>
<p>Observe a prompt appears:</p>
<div class="listingblock">
<div class="content">
<pre>&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll type your messages here - the next section will show you how - but let&#8217;s first set up our consumer.</p>
</div>
</li>
<li>
<p>In the right Consuming terminal pane, run this command to start your consumer:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-console-consumer \
    --bootstrap-server broker:9092 \
    --group test-group \
    --topic test-topic \
    --from-beginning \
    --property print.key=true</strong></pre>
</div>
</div>
</li>
<li>
<p>Observe here only a flashing cursor. When you produce messages, they&#8217;ll show up here.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_experience_producing_and_consuming">Experience Producing and Consuming</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now let&#8217;s produce some messages and observe our consumer as it reads them.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>To produce a message, type a key, followed by a colon, followed by a value after the <code>&gt;</code> prompt in the Producing terminal pane. For example, to produce a message with a key of <strong>4</strong> and a value of <strong>owl</strong>, type:</p>
<div class="listingblock">
<div class="content">
<pre>&gt; <strong>4:owl</strong></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll then get a new prompt to keep producing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&gt;</pre>
</div>
</div>
</li>
<li>
<p>The consumer is already running in the rightmost terminal pane. Observe that the key and value of your message are both displayed automatically. For the above example, one would get:</p>
<div class="listingblock">
<div class="content">
<pre>4       owl</pre>
</div>
</div>
</li>
<li>
<p>Produce at least 4 more messages. Use at least one key twice, but use at least two different keys to get some variety. Observe that the consumer is keeping up with the producer in near real time.</p>
</li>
<li>
<p>Leave your producer and consumer running for the remaining steps.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observe_partitions_and_log_end_offsets">Observe Partitions and Log End Offsets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may recall that when we created our topic, it had <strong>3</strong> partitions. You may also recall hearing about offsets in logs as well as consumer offsets in the Fundamentals presentation. Let&#8217;s see a little bit about those matters.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>When we created our console consumer, we named its consumer group as <strong>test-group</strong>. There&#8217;s a handy CLI command to learn about a consumer group; we can see the various partitions and information about offsets. Back in the Setup and Status terminal panel, run this command:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-consumer-groups \
    --bootstrap-server broker:9092 \
    --describe \
    --group test-group</strong></pre>
</div>
</div>
<details>
<summary class="title">Expected Output</summary>
<div class="content">
<div class="paragraph">
<p>You&#8217;ll get output that looks something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      0          2               2               0               co1
test-group      test-topic      1          5               5               0               co1
test-group      test-topic      2          1               1               0               co1</pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Note that the above output resulted after 8 messages - two of which had key <code>4</code> and six of which had other keys - were produced. Look at the <code>LOG-END-OFFSET</code> column; what do you observe that makes sense? What is not clear?</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>If you add up the values in the <code>LOG-END-OFFSET</code>, you get <code>8</code> and there are <code>8</code> messages.</p>
</div>
<div class="paragraph">
<p>To recap, for any given partition,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the first message is written to offset <code>0</code></p>
</li>
<li>
<p>the next message is written to offset <code>1</code>, etc.</p>
</li>
<li>
<p>the <code>LOG-END-OFFSET</code> shows the offset to which the next message would be written.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So, to be precise, this output and what we&#8217;ve experienced tells us:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>partition <code>0</code> has messages at offsets <code>0</code> and <code>1</code></p>
</li>
<li>
<p>partition <code>1</code> has messages at offsets <code>0</code>, <code>1</code>, <code>2</code>, <code>3</code>, and <code>4</code></p>
</li>
<li>
<p>partition <code>2</code> has a message at offset <code>0</code> only</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>What this does not tell us is which specific messages (and, importantly, which keys) are written to each partition. There&#8217;s an optional exercise in the Enrichment section that explores that if you are curious.</p>
</div>
<div class="paragraph">
<p>(To be very precise, we can reach the above conclusion additionally knowing log compaction is not turned on.)</p>
</div>
</div>
</details>
</li>
<li>
<p>Now produce another message with key <code>4</code> in the Producing pane, e.g.</p>
<div class="listingblock">
<div class="content">
<pre>&gt; <strong>4:seagull</strong></pre>
</div>
</div>
</li>
<li>
<p>Observe this message in your right Consuming terminal pane.</p>
</li>
<li>
<p>Also rerun the <code>kafka-consumer-groups&#8230;&#8203;</code> command from Step 9 in the Setup and Status pane. What do you observe? To which partition did Kafka write your new message?</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>In the running example, the output before producing a new message with key <code>4</code> was</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      0          1               1               0               co1
test-group      test-topic      1          4               4               0               co1
test-group      test-topic      2          1               1               0               co1</code></pre>
</div>
</div>
<div class="paragraph">
<p>And, after producing a new message with key <code>4</code>, the output was:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      0          1               1               0               co1
test-group      test-topic      1          5               5               0               co1
test-group      test-topic      2          1               1               0               co1</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can see that the <code>LOG-END-OFFSET</code> for partition <code>1</code> increased by 1, and we can deduce that our new message was written to partition <code>1</code>.</p>
</div>
<div class="paragraph">
<p>The specific partition number may vary for you, but you should observe exactly one partition&#8217;s <code>LOG-END-OFFSET</code> incrementing.</p>
</div>
</div>
</details>
</li>
<li>
<p>If you were to produce another message with key <code>4</code>, to which partition do you think it will be written? Produce such a message, and repeat the prior step to see if you were right.</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>Yes, if you produce several more messages with key <code>4</code>, they will all go to the same partition.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
This holds true in this setup, but does it always?
</td>
</tr>
</table>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observe_consumer_offsets">Observe Consumer Offsets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Look back at your last output, like that in Step 9. We looked at <code>LOG-END-OFFSET</code>, where the next message will be written in each partition. But you&#8217;ll also see <code>CURRENT-OFFSET</code> reported; this is the <strong>consumer offset</strong>, where the consumer reading a partition will read next.</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="15">
<li>
<p>Inspect the values of <code>CURRENT-OFFSET</code> in your output. Why do they make sense?</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>For all partitions, the <code>CURRENT-OFFSET</code> - or consumer offset - matches the <code>LOG-END-OFFSET</code>. We observed a consumer reading all of the messages that have been produced. Thus, it should make sense that the position to read the next message in each partition (the consumer offset) is the same as the position to write the next message in each partition (the <code>LOG-END-OFFSET</code>).</p>
</div>
</div>
</details>
</li>
<li>
<p>Go back to the Consuming terminal pane and stop the <code>kafka-console-consumer</code> that is running by entering <code>Ctrl+C</code>.</p>
<details>
<summary class="title">Expected Output</summary>
<div class="content">
<div class="paragraph">
<p>Observe a reaction like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>^CProcessed a total of 8 messages
[appuser@broker ~]$</pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Go back to the Setup and Status terminal pane and rerun the <code>kafka-consumer-groups</code> command from Step 9 (you can copy the command from Step 9 or use the up arrow in the terminal) and observe the output.</p>
<details>
<summary class="title">Expected Output</summary>
<div class="content">
<div class="paragraph">
<p>You&#8217;ll see output something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Consumer group 'test-group' has no active members.

GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      2          1               1               0               - -
test-group      test-topic      0          1               1               0               - -
test-group      test-topic      1          5               5               0               - -</pre>
</div>
</div>
<div class="paragraph">
<p>Most importantly, notice that the status indicates that <code>Consumer group 'test-group' has no active members.</code> This makes sense, as we stopped our consumer. But notice that Kafka still knows the offset of the consumer we stopped for each partition; we go in detail about how this works in the Confluent Developer Skills for Building Apache Kafka&#174; and Apache Kafka&#174; Administration by Confluent courses, but let&#8217;s explore consumer offsets just a bit further for now.</p>
</div>
</div>
</details>
</li>
<li>
<p>Your producer should still be running in the middle Producing terminal pane. Produce three more messages.</p>
</li>
<li>
<p>Go back to the left Setup and Status terminal pane and run the <code>kafka-consumer-groups</code> command from Step 9 again and observe the output.</p>
<details>
<summary class="title">Expected Output</summary>
<div class="content">
<div class="paragraph">
<p>Your output might look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Consumer group 'test-group' has no active members.

GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      2          1               1               0               - -
test-group      test-topic      0          1               2               1               - -
test-group      test-topic      1          5               7               2               - -</pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Inspect the <code>CURRENT-OFFSET</code> and <code>LOG-END-OFFSET</code> columns in each row of your output. Why do they make sense?</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>We have produced 3 more messages, but do not have any active consumer.</p>
</div>
<div class="paragraph">
<p>We can deduce from the second row that one of those messages was produced to partition <code>0</code>. The <code>LOG-END-OFFSET</code> has increased by 1, to indicate the next message will be written at offset <code>2</code>. But the <code>CURRENT-OFFSET</code> remains at 1 because there has not been any consumption; the next message to be consumed from this partition is at offset <code>1</code>.</p>
</div>
<div class="paragraph">
<p>We can deduce from the third row that two of the new messages were produced to partition <code>1</code>, but have not yet been consumed. The new messages are at offsets <code>5</code> and <code>6</code>.</p>
</div>
</div>
</details>
</li>
<li>
<p>In the right Consuming terminal pane, start your consumer again. (Copy the command from Step 3 or use the up arrow in the terminal.) Then, back in the left Setup and Status terminal pane, rerun the <code>kafka-consumer-groups</code> (from Step 9, again you can just use the up arrow to get it). Continuing from the last output, you might see output like this:</p>
<div class="listingblock">
<div class="content">
<pre>GROUP           TOPIC           PARTITION  CURRENT-OFFSET  LOG-END-OFFSET  LAG             COD
test-group      test-topic      0          2               2               0               co1
test-group      test-topic      1          7               7               0               co1
test-group      test-topic      2          1               1               0               co1</pre>
</div>
</div>
<div class="paragraph">
<p>What do you observe?</p>
</div>
<details>
<summary class="title">Expected results</summary>
<div class="content">
<div class="paragraph">
<p>Now the <code>CURRRENT-OFFSET</code> for each consumer should be caught up with the <code>LOG-END-OFFSET</code>.</p>
</div>
<div class="paragraph">
<p>You should observe in your Consuming terminal pane that the three new messages are displayed. (Note that even though our <code>kafka-console-consumer</code> command specifies <code>--from-beginning</code>, it interprets this as beginning from the known offset in this case. There&#8217;s a lot going on with consumer offsets, the details of which are out of our scope but are part of the Confluent Developer Skills for Building Apache Kafka&#174; and the Apache Kafka&#174; Administration by Confluent courses.)</p>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cleanup">Cleanup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the end of the activity. There are a few enrichment activities further down in the Enrichment section page you may wish to try, but if you want to finish now, you should:</p>
</div>
<div class="olist arabic">
<ol class="arabic" start="22">
<li>
<p>Stop your producer in the middle Producing terminal pane with <code>Ctrl+D</code>.</p>
</li>
<li>
<p>Stop your consumer in the right Consuming terminal pane with <code>Ctrl+C</code>.</p>
</li>
<li>
<p>Delete the running workspace. Go to the <a href="https://gitpod.io/workspaces" target="_blank" rel="noopener">Gitpod workspaces page</a> and find your workspace, select the three dots, and choose <strong>Delete</strong></p>
<details>
<summary class="title">Illustration</summary>
<div class="content">
<div class="paragraph">
<p>Here&#8217;s a screen shot pointing out how to find the <strong>Delete</strong> option:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/delete-workspace.png" alt="delete workspace">
</div>
</div>
</div>
</details>
</li>
</ol>
</div>
<div class="paragraph">
<p>Note that while you can run multiple workspaces in Gitpod, Github will limit you if you run too many at once and you may need to terminate one or more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enrichment_optional">Enrichment - OPTIONAL</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Numbering for these optional sections is independent of the main activity.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_explore_partitions_further">Explore Partitions Further</h3>
<div class="paragraph">
<p>Here we&#8217;ll look at partitions more. You can consume from a single partition. To do so, add <code>--partition</code> followed by a partition number to the <code>kafka-consumer-groups</code> command. Let&#8217;s try it out.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before you begin, stop your running consumer in the right Consuming terminal pane with <code>Ctrl+C</code>.</p>
<details>
<summary class="title">Alternatively, you can open another terminal pane&#8230;&#8203;</summary>
<div class="content">
<div class="paragraph">
<p>To do so:</p>
</div>
<div class="paragraph">
<p>First, look to the right of the toolbar and click on the down arrow to the right of the <code>+</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/gitpod-new-terminal-pane-1.png" alt="gitpod new terminal pane 1">
</div>
</div>
<div class="paragraph">
<p>Then select <strong>Split Terminal &gt;</strong>, followed by <strong>bash</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/gitpod/gitpod-new-terminal-pane-2.png" alt="gitpod new terminal pane 2">
</div>
</div>
<div class="paragraph">
<p>Finally, run this command (automated in the lab setup for the other terminal panes) in the new terminal pane:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ <strong>docker-compose exec broker bash</strong></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>View what&#8217;s on partition <code>0</code> with this command:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-console-consumer \
    --bootstrap-server broker:9092 \
    --topic test-topic \
    --from-beginning \
    --property print.key=true \
    --partition 0</strong></pre>
</div>
</div>
<div class="paragraph">
<p>You might want to try this for partitions <code>1</code> and <code>2</code> as well. (You might need to in the case that none of your messages was written to partition <code>0</code>.) Remember that you use <code>Ctrl+C</code> to terminate a console consumer.</p>
</div>
</li>
<li>
<p>Inspect your output and write down one key and partition number.</p>
</li>
<li>
<p>Try producing another message with the same key and consuming from the same partition as in the last step. Does the new message go to the same partition? Try this with a few messages.</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>Yes, indeed. If you keep producing more messages with the same key in this setup, they will go to the same partition. I observed a message with key <code>5</code> on partition <code>0</code>, and then produced two more messages with key <code>5</code>, both of which were indeed consumed by the consumer specifically set to read from partition <code>0</code>.</p>
</div>
</div>
</details>
</li>
<li>
<p>Now let&#8217;s increase the number of partitions for our topic. In the left Setup and Status terminal panel, run this command to add two more partitions:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-topics \
    --bootstrap-server broker:9092 \
    --alter \
    --topic test-topic \
    --partitions 5</strong></pre>
</div>
</div>
</li>
<li>
<p>Produce another message with the same key as in Step 3.</p>
</li>
<li>
<p>Then observe your running <code>kafka-console-consumer</code> for the same partition as in Step 3. Did your new message go to the same partition as before? If not, where did it go?</p>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>It is possible your new message went to the same partition as before, but if that happened, try again with a different key.</p>
</div>
<div class="paragraph">
<p>In the running example,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Messages with keys <code>5</code> and <code>11</code> were observed on partition <code>0</code> before increasing the number of partitions</p>
</li>
<li>
<p>After increasing the number of partitions and producing a new message with key <code>5</code>, the new message was observed on partition <code>0</code> as well.</p>
</li>
<li>
<p>However, after producing a new message with key <code>11</code>, the partition <code>0</code> consumer did <strong>not</strong> consume the message with key <code>11</code>.</p>
</li>
<li>
<p>Running the consumer on partition <code>3</code> revealed that this new key-<code>11</code> message was written to partition <code>3</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that in this example, messages with key <code>11</code> produced before the change in number of partitions were written to partition <code>0</code> and messages produced after the change in number of partitions were written to partition <code>3</code>. This follows from the default partitioning strategy presented in the Fundamentals slides.</p>
</div>
<div class="paragraph">
<p>What if you want to partition differently? What if having these key <code>11</code> messages on different partitions is problematic for your use cases? We discuss these matters in the Confluent Developer Skills for Building Apache Kafka&#174; course. What about managing and changing the number of partitions? We discuss more about that in the Apache Kafka&#174; Administration by Confluent course.</p>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_interpret_consumption_status">Interpret Consumption Status</h3>
<div class="paragraph">
<p>Look to your output or the sample output from Step 19. Look at the <code>LAG</code> column. What do you think this means?</p>
</div>
<details>
<summary class="title">Solution</summary>
<div class="content">
<div class="paragraph">
<p>This is the <strong>consumer lag</strong>; each entry tells how many messages have been written to the current partition but have not yet been consumed.</p>
</div>
<div class="paragraph">
<p>We can measure consumer lag not only at the partition level, but also at the consumer and topic level. Because many Kafka use cases involve processing data in real time, consumer lag is an important metric we want to monitor. We go into this in great detail and have exercises on it in our Administration track courses.</p>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_observe_brokers">Observe Brokers</h3>
<div class="paragraph">
<p>We&#8217;ve looked at partitions and messages so far, but recall from the Fundamentals presentation that partitions live on brokers. So, how can we see what the brokers are in this case?</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Run the <code>kafka-topics</code> command with the <code>--describe</code> flag to get some insight:</p>
<div class="listingblock">
<div class="content">
<pre>$ <strong>kafka-topics \
    --bootstrap-server broker:9092 \
    --describe \
    --topic test-topic</strong></pre>
</div>
</div>
</li>
<li>
<p>Observe the output, particularly the <code>Leader</code> attribute in each row:</p>
<div class="listingblock">
<div class="content">
<pre>Topic: test-topic       PartitionCount: 3       ReplicationFactor: 1    Configs:
        Topic: test-topic       Partition: 0    Leader: 1       Replicas: 1     Isr: 1
        Topic: test-topic       Partition: 1    Leader: 1       Replicas: 1     Isr: 1
        Topic: test-topic       Partition: 2    Leader: 1       Replicas: 1     Isr: 1</pre>
</div>
</div>
<div class="paragraph">
<p>In all such cases, the <code>Leader</code> is reported as <code>1</code>. This is the broker ID of the broker that contains the partition for the row. In the lab setup that was done automatically for you, there was only one broker and its ID is <code>1</code>, so this makes sense.</p>
</div>
<div class="paragraph">
<p>More precisely, recall the concept of replication that came up in the Fundamentals presentation briefly. The <code>Leader</code> in the output shows the broker containing the main replica of the partition for each row.</p>
</div>
<details>
<summary class="title">More</summary>
<div class="content">
<div class="paragraph">
<p>The lab setup did not activate replication, or, more accurately, left replication factor at <code>1</code>, as you can observe in the first row of the output. In each partition&#8217;s row, you&#8217;ll see <code>Replicas</code>, which tells the broker IDs where all copies of the partition are, including the leader. The <code>Isr</code> will report an important subset of those replicas. We go into great detail on replication, from different perspectives, in the Confluent Developer Skills for Building Apache Kafka&#174; and the Apache Kafka&#174; Administration by Confluent courses.</p>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_further_enrichment">Further Enrichment</h3>
<div class="paragraph">
<p>We&#8217;ve worked with the following commands in this lab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>kafka-topics</code></p>
</li>
<li>
<p><code>kafka-consumer-groups</code></p>
</li>
<li>
<p><code>kafka-console-producer</code></p>
</li>
<li>
<p><code>kafka-console-consumer</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You might explore by playing with these commands further, reading some of their documentation (good link?), and doing more producing and consuming to see what happens.</p>
</div>
<div class="paragraph">
<p>We are only scratching the surface here. Take either the Confluent Developer Skills for Building Apache Kafka&#174; course and/or the Apache Kafka&#174; Administration by Confluent course to learn about producers, consumers, groups, partitions, offsets, and more in much more detail!</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version draft<br>
Last updated 2022-01-14 19:50:24 UTC
</div>
</div>
</body>
</html>